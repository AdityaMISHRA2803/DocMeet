<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
    integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&amp;family=Poppins:wght@400;500;600&amp;display=swap">
  <script src="https://kit.fontawesome.com/d8ab0e903f.js"></script>
  <title>Health Management Webapp</title>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#211042',
            secondary: '#326ad1',
            accent: '#2a029f',
          },
          fontFamily: {
            poppins: ['Poppins', 'sans-serif'],
          },
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .bg-gradient-nav {
        background-image: radial-gradient(circle at 17% 77%, rgba(17, 17, 17,0.04) 0%, rgba(17, 17, 17,0.04) 50%,rgba(197, 197, 197,0.04) 50%, rgba(197, 197, 197,0.04) 100%),
                        radial-gradient(circle at 26% 17%, rgba(64, 64, 64,0.04) 0%, rgba(64, 64, 64,0.04) 50%,rgba(244, 244, 244,0.04) 50%, rgba(244, 244, 244,0.04) 100%),
                        radial-gradient(circle at 44% 60%, rgba(177, 177, 177,0.04) 0%, rgba(177, 177, 177,0.04) 50%,rgba(187, 187, 187,0.04) 50%, rgba(187, 187, 187,0.04) 100%),
                        linear-gradient(19deg, rgb(28, 117, 250), rgb(34, 2, 159));
      }
    }
  </style>
</head>

<body class="h-full font-poppins bg-white flex">
  <!-- Mobile menu toggle -->
  <div class="lg:hidden fixed top-5 left-5 z-50 text-white text-2xl cursor-pointer menu-toggle">
    <i class="fas fa-bars"></i>
  </div>

  <!-- navigation -->
  <div class="navigation fixed h-full w-16 bg-gradient-nav shadow-lg border-l-8 border-primary overflow-x-hidden transition-all duration-300 hover:w-64 z-40">
    <ul class="absolute top-0 left-0 w-full pt-10 pl-1">
      <li class="list active w-full rounded-tl-2xl rounded-bl-2xl my-1">
        <a href="/dashboard" class="relative block w-full flex items-center text-white no-underline">
          <span class="icon block min-w-[60px] h-15 leading-[70px] text-center">
            <i class="fas fa-home text-xl relative z-10"></i>
          </span>
          <span class="title block pl-2 h-15 leading-[60px] whitespace-nowrap text-lg font-medium">Dashboard</span>
        </a>
      </li>

      <li class="list w-full rounded-tl-2xl rounded-bl-2xl my-1">
        <a href="/appointment" class="relative block w-full flex items-center text-white no-underline">
          <span class="icon block min-w-[60px] h-15 leading-[70px] text-center">
            <i class="fas fa-calendar-check text-xl relative z-10"></i>
          </span>
          <span class="title block pl-2 h-15 leading-[60px] whitespace-nowrap text-lg font-medium">Appointment</span>
        </a>
      </li>
      
      <li class="list w-full rounded-tl-2xl rounded-bl-2xl my-1">
        <a href="/disease" class="relative block w-full flex items-center text-white no-underline">
          <span class="icon block min-w-[60px] h-15 leading-[70px] text-center">
            <i class="fas fa-search-plus text-xl relative z-10"></i>
          </span>
          <span class="title block pl-2 h-15 leading-[60px] whitespace-nowrap text-lg font-medium">Search Disease</span>
        </a>
      </li>
      
      <li class="list w-full rounded-tl-2xl rounded-bl-2xl my-1">
        <a href="/calorie_tracker" class="relative block w-full flex items-center text-white no-underline">
          <span class="icon block min-w-[60px] h-15 leading-[70px] text-center">
            <i class="fas fa-utensils text-xl relative z-10"></i>
          </span>
          <span class="title block pl-2 h-15 leading-[60px] whitespace-nowrap text-lg font-medium">Diet Tracker</span>
        </a>
      </li>
      
      <li class="list w-full rounded-tl-2xl rounded-bl-2xl my-1">
        <a href="/profile" class="relative block w-full flex items-center text-white no-underline">
          <span class="icon block min-w-[60px] h-15 leading-[70px] text-center">
            <i class="fas fa-user-cog text-xl relative z-10"></i>
          </span>
          <span class="title block pl-2 h-15 leading-[60px] whitespace-nowrap text-lg font-medium">Edit Profile</span>
        </a>
      </li>
      
      <li class="list w-full rounded-tl-2xl rounded-bl-2xl my-1">
        <a href="/help" class="relative block w-full flex items-center text-white no-underline">
          <span class="icon block min-w-[60px] h-15 leading-[70px] text-center">
            <i class="far fa-question-circle text-xl relative z-10"></i>
          </span>
          <span class="title block pl-2 h-15 leading-[60px] whitespace-nowrap text-lg font-medium">Help</span>
        </a>
      </li>
      
      <li class="list w-full rounded-tl-2xl rounded-bl-2xl my-1">
        <a href="/auth/logout" class="relative block w-full flex items-center text-white no-underline">
          <span class="icon block min-w-[60px] h-15 leading-[70px] text-center">
            <i class="fas fa-sign-out-alt text-xl relative z-10"></i>
          </span>
          <span class="title block pl-2 h-15 leading-[60px] whitespace-nowrap text-lg font-medium">Sign Out</span>
        </a>
      </li>
    </ul>
  </div>
  <!-- end of navigation -->

  <!-- wrapper -->
  <div class="wrapper ml-16 w-[calc(100%-4rem)] h-full">
    <!-- search starts -->
    <div class="search border-b border-gray-200 mx-8 py-4 relative">
      <div class="logo absolute right-0 top-0 text-blue-500 z-10 text-2xl p-4">
        <i class="fas fa-laptop-medical"></i>
      </div>
      <form class="search-form flex relative w-full">
        <label class="block w-full">
          <button type="submit" class="searchButton absolute top-2 left-3 bg-transparent border-none cursor-pointer text-gray-400">
            <i class="fa fa-search text-lg"></i>
          </button>
          <input type="search" id="site-search" class="search-input w-full pl-10 h-12 border-none focus:outline-none" 
                 placeholder="Global Search" autocomplete="on" />
        </label>
      </form>
    </div>
    <!-- search ends -->

    <!-- mainBlock starts -->
    <div class="main p-6 ml-4 flex flex-col lg:flex-row gap-6 h-[calc(100%-4rem)]">
      <!-- first block -->
      <div class="first flex-1 rounded-xl shadow-lg mb-6 flex flex-col order-1">
        <!-- task-calendar block -->
        <div class="task-calendar grid">
          <!-- task header -->
          <div class="taskhead m-4 ml-8 p-4">
            <!-- details -->
            <div class="user">
              <h2 class="text-xl font-semibold">Hello, <%= foundUser.displayName%></h2>
            </div>
            <!-- end of details -->
          </div>
          <!-- taskhead ends -->

          <!-- task-block -->
          <div class="task-block border-t border-gray-200 p-6 flex flex-col justify-around h-full">
            <div class="column2 mt-8 rounded-lg shadow-lg p-6">
              <div class="mednaam">
                <form action="/dashboard" method="POST" id="myform">
                  <h2 class="text-xl font-semibold mb-4">Medicine Schedule</h2>
                  <div class="one-row flex flex-col md:flex-row gap-4 mb-4">
                    <input type="text" id="medname" name="Medicine_name" placeholder="Medicine name" 
                           class="w-full md:w-1/3 p-3 rounded-lg border border-gray-300">
                    <input type="text" id="timing" name="medicine_time" placeholder="before/after eating" 
                           class="w-full md:w-1/3 p-3 rounded-lg border border-gray-300">
                    <input type="text" id="frequency" name="medicine_freq" placeholder="Times a day" 
                           class="w-full md:w-1/3 p-3 rounded-lg border border-gray-300">
                  </div>
                  <button type="submit" class="addMed px-4 py-2 rounded-full m-2 text-white bg-blue-600 border-none">
                    Add Medicines
                  </button>
                </form>
              </div>
              <div class="medlist mt-6">
                <h2 class="text-xl font-semibold mb-4">Medicine List</h2>
                <div class="overflow-x-auto">
                  <table id="MEDicines" class="w-full rounded-lg border border-gray-200 overflow-hidden">
                    <thead class="bg-blue-500 bg-opacity-45">
                      <tr>
                        <th class="p-3 text-center">Medicine name</th>
                        <th class="p-3 text-center">Before/After Eating</th>
                        <th class="p-3 text-center">Frequency</th>
                        <th class="p-3 text-center">Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      <%if(foundUser.details.length> 0) {%>
                        <%for(var i=0;i<foundUser.details.length; i++){%>
                          <tr class="text-center align-middle">
                            <td class="p-3"><%= foundUser.details[i].medname%></td>
                            <td class="p-3"><%= foundUser.details[i].time %></td>
                            <td class="p-3"><%= foundUser.details[i].freq %></td>
                            <td class="p-3">
                              <button class="btn btn-danger btn-sm del_row bg-red-500 text-white p-1 rounded" onclick="Delete(this)">
                                <i class="fas fa-trash"></i>
                              </button>
                            </td>
                          </tr>
                        <% } %>
                      <% } %>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <!-- task-block ends-->
        </div>
        <!-- task-calendar block ends -->
      </div>
      <!-- first block ends -->

      <!-- second block -->
      <div class="second flex flex-col lg:w-1/3 gap-4">
        <!-- task-graph block -->
        <div class="task h-auto rounded-xl shadow-lg">
          <div class="panelHeader flex items-center border-b border-gray-200 p-6 h-16">
            <i class="fas fa-calendar-plus"></i>
            <span class="calendar ml-2 text-lg font-medium">Calendar</span>
            <div class="wrapper_calendar w-full p-4">
              <div id="calendari" class="mx-auto my-4 relative overflow-visible min-h-[373px] w-full max-w-[310px] bg-white rounded-lg shadow-md p-2">
                <!-- Calendar table will be inserted here by JS -->
              </div>
            </div>
          </div>
          <div class="illu mt-16 p-4">
            <img src="/undraw_fitness_stats_sht6.png" alt="Fitness illustration" class="w-full h-auto">
          </div>
        </div>
        <!-- task-graph block ends-->
      </div>
      <!-- second block ends -->
    </div>
    <!-- main ends -->
  </div>
  <!-- wrapper -->

  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  
  <script>
    // Mobile menu toggle
    document.querySelector('.menu-toggle').addEventListener('click', function() {
      document.querySelector('.navigation').classList.toggle('w-16');
      document.querySelector('.navigation').classList.toggle('w-64');
      document.querySelector('.wrapper').classList.toggle('ml-16');
      document.querySelector('.wrapper').classList.toggle('ml-64');
    });
    
    // Close menu when clicking on a link (for mobile)
    document.querySelectorAll('.navigation a').forEach(link => {
      link.addEventListener('click', function() {
        if (window.innerWidth < 1024) {
          document.querySelector('.navigation').classList.remove('w-64');
          document.querySelector('.navigation').classList.add('w-16');
          document.querySelector('.wrapper').classList.remove('ml-64');
          document.querySelector('.wrapper').classList.add('ml-16');
        }
      });
    });

    function Delete(x) {
      x.parentElement.parentElement.remove();
    }

    // Initialize calendar (your existing calendar initialization code would go here)
    // This is just a placeholder - use your actual calendar initialization code
    document.addEventListener('DOMContentLoaded', function() {
      // Your calendar initialization code from Calender_dash.js
    });
  </script>
</body>
</html>
